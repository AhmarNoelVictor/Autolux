{% extends "base.html" %}
{% load static %}
{% block css %}
    <link rel="shortcut icon" href="{% static 'images/logo.png' %}" type="image/gif" sizes="16x16">
    <link href="{% static 'css/bootstrap.css' %}" rel="stylesheet" type="text/css" media="all" />
    <link href="{% static 'css/style.css' %}" rel="stylesheet" type="text/css" media="all" />
    <link href="{% static 'css/font-awesome.css' %}" rel="stylesheet">
    <link href="{% static 'css/easy-responsive-tabs.css' %}" rel='stylesheet' type='text/css'/>
    <link rel="stylesheet" href="{% static 'css/flexslider.css' %}" type="text/css" media="screen" />

    <!-- //for bootstrap working -->
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800" rel="stylesheet">
    <link href='//fonts.googleapis.com/css?family=Lato:400,100,100italic,300,300italic,400italic,700,900,900italic,700italic' rel='stylesheet' type='text/css'>
{% endblock %}
{% block content %}
<!--/single_page-->
       <!-- /banner_bottom_agile_info -->

<div class="contact-us-image">
    <img class="category-header-img" src="{% static 'images/suv_items_header.jpg' %}">
    <div class="col-md-12 myclass">
        <div class="col-md-offset-5 col-md-3">
            <h3 class="contact-us-title-setting" style="color: ghostwhite;">{{ page_title }}</h3>
        </div>
{#    <h3 class="contact-us-title-setting">{{ page_title }}</h3>#}
    <!--/w3_short-->
         <div class="services-breadcrumb">
            <div class="agile_inner_breadcrumb">
               <ul class="w3_short">
                    <li><a href="{% url 'index' %}">Home</a><i>|</i></li>
                    <li>{{ page_title }}</li>
                </ul>
             </div>
        </div>
    <!--//w3_short-->
    </div>
</div>

  <!-- banner-bootom-w3-agileits -->
<div class="banner-bootom-w3-agileits">
	<div class="container">
	     <div class="col-md-4 single-right-left ">
			<div class="grid images_3_of_2">
				<div class="flexslider">

					<ul class="slides">
						<li data-thumb="{{ item.first_image_thumbnail.url }}">
							<div class="thumb-image"> <img src="{{ item.first_image_thumbnail.url }}" data-imagezoom="true" class="img-responsive"> </div>
						</li>
						<li data-thumb="{{ item.second_image_thumbnail.url }}">
							<div class="thumb-image"> <img src="{{ item.second_image_thumbnail.url }}" data-imagezoom="true" class="img-responsive"> </div>
						</li>
						<li data-thumb="{{ item.third_image_thumbnail.url }}">
							<div class="thumb-image"> <img src="{{ item.third_image_thumbnail.url }}" data-imagezoom="true" class="img-responsive"> </div>
						</li>
					</ul>
					<div class="clearfix"></div>
				</div>
			</div>
		</div>
		<div class="col-md-8 single-right-left simpleCart_shelfItem">
            <h3>{{ item.product_id.product_title }}</h3>
                {% if item.product_id.product_discounted_price != null %}
                    <p>
                        <span class="item_price">Rs {{ item.product_id.product_discounted_price|floatformat }}</span>
                        <del>Rs {{ item.product_id.product_price|floatformat }}</del>
                    </p>
                {% else %}
                    <p>
                        <span class="item_price">Rs {{ item.product_id.product_price|floatformat }}</span>
                    </p>
                {% endif %}
            <h5>{{ item.product_description }}</h5>
{#					<div class="rating1">#}
{#						<span class="starRating">#}
{#							<input id="rating5" type="radio" name="rating" value="5">#}
{#							<label for="rating5">5</label>#}
{#							<input id="rating4" type="radio" name="rating" value="4">#}
{#							<label for="rating4">4</label>#}
{#							<input id="rating3" type="radio" name="rating" value="3" checked="">#}
{#							<label for="rating3">3</label>#}
{#							<input id="rating2" type="radio" name="rating" value="2">#}
{#							<label for="rating2">2</label>#}
{#							<input id="rating1" type="radio" name="rating" value="1">#}
{#							<label for="rating1">1</label>#}
{#						</span>#}
{#					</div>#}

            <div class="center">
                <p>
                  </p><div class="input-group">
                      <span class="input-group-btn">
                          <button type="button" class="btn btn-danger btn-number"  data-type="minus" data-field="quant[2]">
                            <span class="glyphicon glyphicon-minus"></span>
                          </button>
                      </span>
                      <input id="pd_quantity_value" type="text" name="quant[2]" class="form-control input-number" value="1" min="1" max="100">
                      <span class="input-group-btn">
                          <button type="button" class="btn btn-success btn-number" data-type="plus" data-field="quant[2]">
                              <span class="glyphicon glyphicon-plus"></span>
                          </button>
                      </span>
                  </div>
                <p></p>
            </div>
            <div class="occasion-cart">
            {#  Add to cart form    #}
            <div class="snipcart-details top_brand_home_details item_add single-item hvr-outline-out button2">
                <form action="#" method="post" id="add_to_cart_{{ item.product_id.id }}">
                {% csrf_token %}
                    <fieldset>
                        <input type="hidden" name="item_id" value="{{ item.product_id.id}}" />
                        <input type="hidden" name="item_name" value="{{ item.product_id.product_title }}" />
                        <input type="hidden" name="item_description" value="{{ item.product_id.product_related_name.first.product_description }}" />
                        <input type="hidden" name="item_image" value="{{ item.product_id.product_image_front }}" />
                        {% if item.product_id.product_discounted_price != null %}
                            <input type="hidden" name="amount" value="{{ item.product_id.product_discounted_price }}" />
                         {% else %}
                            <input type="hidden" name="amount" value="{{ item.product_id.product_price }}" />
                        {% endif %}
                         <input id="item_quantity_pd" type="hidden" name="item_quantity" value="1" />
                        <input type="submit" name="submit" value="Add to cart" class="button" onclick="setQuantity()"/>
                    </fieldset>
                </form>
            </div>

            </div>
{#            <ul class="social-nav model-3d-0 footer-social w3_agile_social single_page_w3ls">#}
{#                <li class="share">Share On : </li>#}
{#                    <li><a href="#" class="facebook">#}
{#                          <div class="front"><i class="fa fa-facebook" aria-hidden="true"></i></div>#}
{#                          <div class="back"><i class="fa fa-facebook" aria-hidden="true"></i></div></a></li>#}
{#                    <li><a href="#" class="instagram">#}
{#                          <div class="front"><i class="fa fa-instagram" aria-hidden="true"></i></div>#}
{#                          <div class="back"><i class="fa fa-instagram" aria-hidden="true"></i></div></a></li>#}
{#            </ul>#}
        </div>
        <div class="clearfix"> </div>
				<!-- /new_arrivals -->
	<div class="responsive_tabs_agileits">
        <div id="horizontalTab">
                <ul class="resp-tabs-list">
                    <li>Description</li>
                    <li>Information</li>
{#							<li>Information</li>#}
                </ul>
            <div class="resp-tabs-container">
            <!--/tab_one-->
               <div class="tab1">

                    <div class="single_page_agile_its_w3ls">
{#							  <h6>Lorem ipsum dolor sit amet</h6>#}
                       <p>{{ item.product_description }}</p>
                    </div>
                </div>
                <!--//tab_one-->
{#						<div class="tab2">#}
{##}
{#							<div class="single_page_agile_its_w3ls">#}
{#								<div class="bootstrap-tab-text-grids">#}
{#									<div class="bootstrap-tab-text-grid">#}
{#										<div class="bootstrap-tab-text-grid-left">#}
{#											<img src="{% static 'images/2.png' %}" alt=" " class="img-responsive">#}
{#										</div>#}
{#										<div class="bootstrap-tab-text-grid-right">#}
{#											<ul>#}
{#												<li><a href="#">Admin</a></li>#}
{#												<li><a href="#"><i class="fa fa-reply-all" aria-hidden="true"></i> Reply</a></li>#}
{#											</ul>#}
{#											<p>Lorem ipsum dolor sit amet, consectetur adipisicing elPellentesque vehicula augue eget.Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis#}
{#												suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem#}
{#												vel eum iure reprehenderit.</p>#}
{#										</div>#}
{#										<div class="clearfix"> </div>#}
{#						             </div>#}
{#									 <div class="add-review">#}
{#										<h4>add a review</h4>#}
{#										<form action="#" method="post">#}
{#												<input type="text" name="Name" required="Name">#}
{#												<input type="email" name="Email" required="Email">#}
{#												<textarea name="Message" required=""></textarea>#}
{#											<input type="submit" value="SEND">#}
{#										</form>#}
{#									</div>#}
{#								 </div>#}
{##}
{#							 </div>#}
{#						 </div>#}
                   <div class="tab3">

                    <div class="single_page_agile_its_w3ls">
                      <h6>{{ item.product_id.product_title }}</h6>
                       <p>{{ item.product_information }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
	<!-- //new_arrivals -->
	  	<!--/slider_owl-->

    <div class="w3_agile_latest_arrivals">
        <h3 class="wthree_text_info">New <span>Arrivals</span></h3>
            {% if new_arrivals %}
                {% for item in new_arrivals %}
                    <div class="col-md-3 product-men">
                        <div class="men-pro-item simpleCart_shelfItem">
                            <div class="men-thumb-item">
                                <img src="{{ item.front_image_thumbnail.url }}" alt="" class="pro-image-front">
                                <img src="{{ item.back_image_thumbnail.url }}" alt="" class="pro-image-back">
                                    <div class="men-cart-pro">
                                        <div class="inner-men-cart-pro">
                                            <a href="{% url 'single' id=item.id %}" class="link-product-add-cart">Quick View</a>
                                        </div>
                                    </div>
                                    <span class="product-new-top">New</span>
                            </div>
                            <div class="item-info-product ">
                                <h4><a href="{% url 'single' id=item.id %}">{{ item.product_title }}</a></h4>
                                {% if item.product_discounted_price != null %}
                                    <div class="info-product-price">
                                        <span class="item_price">Rs {{ item.product_discounted_price }}</span>
                                        <del>Rs {{ item.product_price }}</del>
                                    </div>
                                {% else %}
                                    <div class="info-product-price">
                                        <span class="item_price">Rs {{ item.product_price }}</span>
                                    </div>
                                {% endif %}
                            {#  Add to cart form    #}
                            {% include 'add-to-cart-partial.html' %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
                <div class="clearfix"> </div>
                <!--//slider_owl-->
         </div>
    </div>
 </div>
{#<!-- js -->#}
<script type="text/javascript" src="{% static 'js/jquery-2.1.4.min.js' %}"></script>

<script src="{% static 'js/imagezoom.js' %}"></script>

<script>
// Can also be used with $(document).ready()
    $(window).load(function() {
        $('.flexslider').flexslider({
        animation: "slide",
        controlNav: "thumbnails"
        });
    });
</script>
					<!-- //FlexSlider-->
<!-- //script for responsive tabs -->
<script>
    $('.btn-number').click(function(e){
    e.preventDefault();

    fieldName = $(this).attr('data-field');
    type      = $(this).attr('data-type');
    var input = $("input[name='"+fieldName+"']");
    var currentVal = parseInt(input.val());
    if (!isNaN(currentVal)) {
        if(type == 'minus') {

            if(currentVal > input.attr('min')) {
                input.val(currentVal - 1).change();
            }
            if(parseInt(input.val()) == input.attr('min')) {
                $(this).attr('disabled', true);
            }

        } else if(type == 'plus') {

            if(currentVal < input.attr('max')) {
                input.val(currentVal + 1).change();
            }
            if(parseInt(input.val()) == input.attr('max')) {
                $(this).attr('disabled', true);
            }

        }
    } else {
        input.val(0);
    }
});
$('.input-number').focusin(function(){
   $(this).data('oldValue', $(this).val());
});
$('.input-number').change(function() {

    minValue =  parseInt($(this).attr('min'));
    maxValue =  parseInt($(this).attr('max'));
    valueCurrent = parseInt($(this).val());

    name = $(this).attr('name');
    if(valueCurrent >= minValue) {
        $(".btn-number[data-type='minus'][data-field='"+name+"']").removeAttr('disabled')
    } else {
        alert('Sorry, the minimum value was reached');
        $(this).val($(this).data('oldValue'));
    }
    if(valueCurrent <= maxValue) {
        $(".btn-number[data-type='plus'][data-field='"+name+"']").removeAttr('disabled')
    } else {
        alert('Sorry, the maximum value was reached');
        $(this).val($(this).data('oldValue'));
    }


});
$(".input-number").keydown(function (e) {
        // Allow: backspace, delete, tab, escape, enter and .
        if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 ||
             // Allow: Ctrl+A
            (e.keyCode == 65 && e.ctrlKey === true) ||
             // Allow: home, end, left, right
            (e.keyCode >= 35 && e.keyCode <= 39)) {
                 // let it happen, don't do anything
                 return;
        }
        // Ensure that it is a number and stop the keypress
        if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
            e.preventDefault();
        }
    });
    </script>

    <script>

    var cart = {};
    cart.products = [];
    if(!localStorage.getItem('cart')){
        window.localStorage.setItem('cart', JSON.stringify(cart));
    }
    {% for item in  all_products%}
        $(document).on('submit', '#add_to_cart_{{ item.id }}', function(e) {
            e.preventDefault();
            $('#item-added-to-cart').modal('show');
            setTimeout(function() {$('#item-added-to-cart').modal('hide');}, 1000);
            var status_code = true;
            var items = JSON.parse(localStorage["cart"]);
            for (var i = 0; i < items.products.length; i++) {
                 if(items.products[i].id == {{ item.id }}){
                     {#counter = parseInt(items.products[i].quantity) + 1;#}
                     items.products[i].quantity = e.target.item_quantity.value;
                     item = JSON.stringify(items);
                     localStorage.setItem("cart", item);
                     status_code = false;
                   break;
                 }
            }
          if (status_code === true) {
            var product = {};
            product.id = e.target.item_id.value;
            product.name = e.target.item_name.value;
            product.price = e.target.amount.value;
            product.description = e.target.item_description.value;
            product.quantity = e.target.item_quantity.value;
            product.image = e.target.item_image.value;
            saveToSession(product);
          }
        });
    {% endfor %}

    function saveToSession(product) {
    // Retrieve the cart object from local storage
    if (localStorage && localStorage.getItem('cart')) {
        var cart = JSON.parse(localStorage.getItem('cart'));

        cart.products.push(product);

        localStorage.setItem('cart', JSON.stringify(cart));
    }
}

</script>




    <script>
        function setQuantity() {
            $('#item_quantity_pd').val($('#pd_quantity_value').val());
        }
    </script>
{% endblock %}
